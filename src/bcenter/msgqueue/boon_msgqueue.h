/****************************************************************************************************************************************
 文件名:boon_msgqueue.h
 公司名：山东博昂
 创建人:孙振行
 创建日期：20151111
 简要描述：消息队列模块
 修改记录：
****************************************************************************************************************************************/
#ifndef __BOONMSGQUEUE_H__
#define __BOONMSGQUEUE_H__

#include <queue>
#include "boon_mutex.h"
#include "boon_condition.h"
#include "../global/boon_global.h"

using namespace std;
using namespace common;
#define CONDITION_WAIT_MILSECOND         500

class BoonMsgQueue
{
public:
	static BoonMsgQueue* Instance()			{return &m_clsMsgQue;}
/****************************************************************************************************************************************
	 函数简介     把入口信息放入队列
****************************************************************************************************************************************/
int put_in(car_msg* pstrRecord);
/****************************************************************************************************************************************
	 函数简介     把出口信息放入队列
****************************************************************************************************************************************/
int put_out(car_msg* pstrRecord);
/****************************************************************************************************************************************
	 函数简介     把过车信息放入队列
****************************************************************************************************************************************/
int put_carpass(car_pass* pstrRecord);
/****************************************************************************************************************************************
	函数简介    获取入口信息队列的大小
****************************************************************************************************************************************/
int get_size_in();
/****************************************************************************************************************************************
	函数简介    获取出口信息队列的大小
****************************************************************************************************************************************/
int get_size_out();
/****************************************************************************************************************************************
	函数简介    获取过车信息队列的大小
****************************************************************************************************************************************/
int get_size_carpass();
/****************************************************************************************************************************************
	 函数简介     从队列取出入口信息
****************************************************************************************************************************************/
car_msg* get_in();
/****************************************************************************************************************************************
	 函数简介     从队列取出出口信息
****************************************************************************************************************************************/
car_msg* get_out();
/****************************************************************************************************************************************
	 函数简介     从队列取出过车信息
****************************************************************************************************************************************/
car_pass* get_carpass();
/****************************************************************************************************************************************
	函数简介    释放入口信息
****************************************************************************************************************************************/
void release_in(car_msg* pstrRecord);
/****************************************************************************************************************************************
	函数简介    释放出口信息
****************************************************************************************************************************************/
void release_out(car_msg* pstrRecord);
/****************************************************************************************************************************************
	函数简介    释放过车信息
****************************************************************************************************************************************/
void release_carpass(car_pass* pstrRecord);
	

private:
	BoonMsgQueue()							{}
	~BoonMsgQueue()							{}
	
private:
        static BoonMsgQueue			m_clsMsgQue;
	BoonMutex					m_mutex_in;     //入口队列互斥锁
	BoonCondition				m_condition_in;   //入口队列条件变量
	BoonMutex					m_mutex_out;   //出口队列互斥锁
	BoonCondition				m_condition_out;    //出口队列条件变量
	BoonMutex					m_mutex_carpass;   //过车队列互斥锁
	BoonCondition				m_condition_carpass;    //过车队列条件变量
	
	queue<car_msg*>		m_que_in;  //入口队列
	queue<car_msg*>             m_que_out; //出口队列
	queue<car_pass*>            m_que_carpass;  //过车队列
	
};



#endif
	
